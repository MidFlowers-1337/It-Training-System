# IT技能培训智能选课系统 - 后端模块详细实现清单

## 模块1：基础工程与公共模块

### 1.1 项目结构搭建
- [ ] 创建标准分层包结构
  - `com.ittraining.common` - 公共模块
  - `com.ittraining.config` - 配置类
  - `com.ittraining.controller` - 控制器
  - `com.ittraining.service` - 服务层
  - `com.ittraining.mapper` - 数据访问层
  - `com.ittraining.entity` - 实体类
  - `com.ittraining.dto` - 数据传输对象
  - `com.ittraining.vo` - 视图对象

### 1.2 Maven依赖配置（pom.xml）
- [ ] Spring Boot 核心依赖
  - `spring-boot-starter-web`
  - `spring-boot-starter-security`
  - `spring-boot-starter-validation`
  - `spring-boot-starter-aop`
  
- [ ] 数据库相关
  - `mybatis-spring-boot-starter` (3.0.x)
  - `mysql-connector-j` (TiDB兼容)
  - `pagehelper-spring-boot-starter` (1.4.x)
  - `flyway-core` (数据库迁移)
  
- [ ] 缓存与消息队列
  - `spring-boot-starter-data-redis`
  - `redisson-spring-boot-starter` (3.27.x)
  - `rocketmq-spring-boot-starter` (2.3.x)
  - `caffeine` (3.1.x) - 本地缓存
  
- [ ] AI相关
  - `spring-ai-ollama-spring-boot-starter` (1.0.0)
  
- [ ] 工具类库
  - `hutool-all` (5.8.x)
  - `jjwt-api`, `jjwt-impl`, `jjwt-jackson` (0.12.x)
  - `easyexcel` (3.3.x)
  - `guava` (32.x) - 限流等
  
- [ ] 文档与测试
  - `springdoc-openapi-starter-webmvc-ui` (2.x) - Swagger
  - `spring-boot-starter-test`

### 1.3 统一返回体
- [ ] 创建 `Result.java`
  ```java
  - code: Integer (200成功, 400客户端错误, 500服务器错误)
  - message: String
  - data: T (泛型)
  - timestamp: Long
  - 静态方法: success(), success(T data), error(String msg), error(int code, String msg)
  ```

- [ ] 创建 `PageResult.java`
  ```java
  - total: Long (总记录数)
  - pages: Integer (总页数)
  - pageNum: Integer (当前页)
  - pageSize: Integer (每页大小)
  - list: List<T> (数据列表)
  ```

### 1.4 统一异常处理
- [ ] 创建 `BusinessException.java` (业务异常)
  ```java
  - errorCode: ErrorCode
  - message: String
  - 构造方法支持ErrorCode枚举和自定义消息
  ```

- [ ] 创建 `ErrorCode.java` (错误码枚举)
  ```java
  - SUCCESS(200, "操作成功")
  - PARAMS_ERROR(400, "参数错误")
  - NOT_LOGIN(401, "未登录")
  - NO_AUTH(403, "无权限")
  - NOT_FOUND(404, "资源不存在")
  - SYSTEM_ERROR(500, "系统错误")
  - 其他业务错误码...
  ```

- [ ] 创建 `GlobalExceptionHandler.java`
  ```java
  - @ExceptionHandler(BusinessException.class) - 业务异常
  - @ExceptionHandler(MethodArgumentNotValidException.class) - 参数校验异常
  - @ExceptionHandler(BindException.class) - 绑定异常
  - @ExceptionHandler(Exception.class) - 兜底异常
  - 返回统一Result格式
  ```

### 1.5 常量定义
- [ ] `RedisKeyConstant.java` - Redis键常量
  ```java
  - USER_TOKEN_PREFIX = "user:token:"
  - COURSE_STOCK_PREFIX = "course:stock:"
  - ENROLL_LOCK_PREFIX = "enroll:lock:"
  - ENROLL_CHECK_PREFIX = "enroll:check:"
  ```

- [ ] `RoleConstant.java` - 角色常量
  ```java
  - ROLE_ADMIN = "admin"
  - ROLE_TEACHER = "teacher"
  - ROLE_STUDENT = "student"
  ```

- [ ] `StatusConstant.java` - 状态常量
  ```java
  - ENABLE = 1
  - DISABLE = 0
  - DELETED = -1
  ```

### 1.6 枚举类
- [ ] `CourseStatusEnum.java` - 课程状态
- [ ] `EnrollmentStatusEnum.java` - 选课状态
- [ ] `PaymentStatusEnum.java` - 支付状态
- [ ] `UserRoleEnum.java` - 用户角色

### 1.7 工具类
- [ ] `JwtUtil.java` - JWT工具
  ```java
  - generateToken(Long userId, String username, String role)
  - parseToken(String token)
  - validateToken(String token)
  - refreshToken(String token)
  ```

- [ ] `PasswordUtil.java` - 密码工具
  ```java
  - encode(String rawPassword) - BCrypt加密
  - matches(String rawPassword, String encodedPassword)
  ```

- [ ] `RedisUtil.java` - Redis工具
  ```java
  - set/get/delete/expire
  - increment/decrement
  - setIfAbsent (分布式锁基础)
  ```

- [ ] `FileUtil.java` - 文件工具
  ```java
  - upload(MultipartFile file, String path)
  - delete(String filePath)
  - getFileExtension(String filename)
  - validateFileType(String filename, String[] allowedTypes)
  ```

### 1.8 配置类
- [ ] `CorsConfig.java` - 跨域配置
  ```java
  - 允许的源: http://localhost:5173 (开发), 生产域名
  - 允许的方法: GET, POST, PUT, DELETE, OPTIONS
  - 允许的头: Authorization, Content-Type
  - 允许携带凭证
  ```

- [ ] `SwaggerConfig.java` - API文档配置
  ```java
  - 配置OpenAPI 3.0
  - 添加JWT认证配置
  - 设置API信息(标题、版本、描述)
  ```

- [ ] `WebMvcConfig.java` - MVC配置
  ```java
  - 配置拦截器
  - 配置静态资源映射
  - 配置文件上传大小限制
  ```

- [ ] `MyBatisConfig.java` - MyBatis配置
  ```java
  - 配置PageHelper
  - 配置驼峰命名转换
  - 配置Mapper扫描路径
  ```

### 1.9 日志配置
- [ ] `logback-spring.xml` 配置
  ```xml
  - 控制台输出(开发环境)
  - 文件输出(生产环境)
  - 按日期和大小滚动
  - 不同级别日志分文件
  ```

---

## 模块2：安全与认证模块

### 2.1 Spring Security配置
- [ ] `SecurityConfig.java`
  ```java
  - 配置密码编码器(BCryptPasswordEncoder)
  - 配置认证管理器
  - 配置HTTP安全规则
  - 放行路径: /api/auth/**, /swagger-ui/**, /v3/api-docs/**
  - 其他路径需要认证
  - 禁用CSRF(前后端分离)
  - 配置会话管理(STATELESS)
  - 添加JWT过滤器
  ```

### 2.2 JWT认证过滤器
- [ ] `JwtAuthenticationFilter.java`
  ```java
  - 继承OncePerRequestFilter
  - 从请求头获取token (Authorization: Bearer xxx)
  - 验证token有效性
  - 解析用户信息并设置到SecurityContext
  - 处理token过期、无效等异常
  ```

### 2.3 认证实体类
- [ ] `User.java` (实体类)
  ```java
  - id, username, password, realName, phone, email
  - avatar, gender, birthDate, status
  - createTime, updateTime
  ```

- [ ] `Role.java` (实体类)
  ```java
  - id, roleName, roleCode, description, status
  - createTime, updateTime
  ```

- [ ] `UserRole.java` (关联实体)
  ```java
  - id, userId, roleId, createTime
  ```

### 2.4 认证DTO
- [ ] `LoginRequest.java`
  ```java
  - username: String (@NotBlank)
  - password: String (@NotBlank)
  - captcha: String (验证码)
  ```

- [ ] `RegisterRequest.java`
  ```java
  - username, password, confirmPassword
  - realName, phone, email
  - 参数校验注解
  ```

- [ ] `LoginResponse.java`
  ```java
  - token: String
  - userInfo: UserInfoVO
  - expiresIn: Long
  ```

### 2.5 认证Controller
- [ ] `AuthController.java`
  ```java
  - POST /api/auth/register - 注册
  - POST /api/auth/login - 登录
  - POST /api/auth/logout - 登出
  - POST /api/auth/refresh - 刷新token
  - GET /api/auth/captcha - 获取验证码
  - POST /api/auth/forget-password - 找回密码
  ```

### 2.6 认证Service
- [ ] `IAuthService.java` 接口
  ```java
  - register(RegisterRequest request)
  - login(LoginRequest request)
  - logout(String token)
  - refreshToken(String token)
  - sendVerificationCode(String phone/email)
  - resetPassword(String phone/email, String code, String newPassword)
  ```

- [ ] `AuthServiceImpl.java` 实现
  ```java
  - 实现注册逻辑(用户名唯一性检查、密码加密、默认角色分配)
  - 实现登录逻辑(认证、生成token、记录登录日志)
  - 实现登出逻辑(token加入黑名单)
  - 实现token刷新
  - 集成验证码服务(Redis存储)
  ```

### 2.7 权限注解
- [ ] `@RequireLogin` - 需要登录
- [ ] `@RequireRole` - 需要特定角色
  ```java
  - value: String[] (角色列表)
  - logical: Logical.AND/OR (多角色逻辑)
  ```

### 2.8 权限切面
- [ ] `AuthAspect.java`
  ```java
  - 拦截@RequireLogin注解
  - 拦截@RequireRole注解
  - 从SecurityContext获取当前用户
  - 验证角色权限
  - 抛出无权限异常
  ```

### 2.9 Mapper层
- [ ] `UserMapper.java` + `UserMapper.xml`
  ```java
  - selectById(Long id)
  - selectByUsername(String username)
  - selectByPhone(String phone)
  - selectByEmail(String email)
  - insert(User user)
  - updateById(User user)
  - deleteById(Long id)
  ```

- [ ] `RoleMapper.java` + `RoleMapper.xml`
- [ ] `UserRoleMapper.java` + `UserRoleMapper.xml`

---

## 模块3：用户管理模块

### 3.1 用户管理Controller
- [ ] `AdminUserController.java` (管理员端)
  ```java
  - GET /api/admin/users - 用户列表(分页、搜索)
  - GET /api/admin/users/{id} - 用户详情
  - POST /api/admin/users - 创建用户
  - PUT /api/admin/users/{id} - 更新用户
  - DELETE /api/admin/users/{id} - 删除用户
  - PUT /api/admin/users/{id}/status - 启用/禁用
  - PUT /api/admin/users/{id}/roles - 分配角色
  - PUT /api/admin/users/{id}/reset-password - 重置密码
  ```

- [ ] `UserController.java` (用户端)
  ```java
  - GET /api/user/profile - 获取个人信息
  - PUT /api/user/profile - 更新个人信息
  - POST /api/user/avatar - 上传头像
  - PUT /api/user/password - 修改密码
  ```

### 3.2 用户DTO
- [ ] `UserQueryRequest.java` (查询条件)
  ```java
  - username, realName, phone, email
  - roleId, status
  - pageNum, pageSize
  ```

- [ ] `UserCreateRequest.java`
- [ ] `UserUpdateRequest.java`
- [ ] `UserInfoVO.java` (返回视图)
  ```java
  - 用户基本信息
  - 角色列表
  - 权限列表
  - 不包含密码
  ```

### 3.3 用户Service
- [ ] `IUserService.java` 接口
  ```java
  - getUserList(UserQueryRequest request)
  - getUserById(Long id)
  - createUser(UserCreateRequest request)
  - updateUser(Long id, UserUpdateRequest request)
  - deleteUser(Long id)
  - updateStatus(Long id, Integer status)
  - assignRoles(Long userId, List<Long> roleIds)
  - resetPassword(Long userId, String newPassword)
  - uploadAvatar(Long userId, MultipartFile file)
  - updatePassword(Long userId, String oldPassword, String newPassword)
  ```

- [ ] `UserServiceImpl.java` 实现

### 3.4 角色管理
- [ ] `RoleController.java`
  ```java
  - GET /api/admin/roles - 角色列表
  - POST /api/admin/roles - 创建角色
  - PUT /api/admin/roles/{id} - 更新角色
  - DELETE /api/admin/roles/{id} - 删除角色
  ```

- [ ] `IRoleService.java` + `RoleServiceImpl.java`

---

## 模块4：课程管理模块

### 4.1 课程实体类
- [ ] `Course.java`
  ```java
  - 基本信息: id, courseName, courseCode, categoryId, teacherId
  - 描述信息: coverImage, description, difficultyLevel, duration
  - 价格信息: price, originalPrice
  - 名额信息: maxStudents, enrolledCount, stock, version(乐观锁)
  - 统计信息: viewCount, rating, ratingCount
  - 状态信息: status, isHot, isRecommend
  - 时间信息: startTime, endTime, createTime, updateTime
  ```

- [ ] `CourseCategory.java` (课程分类)
- [ ] `CourseChapter.java` (课程章节)
- [ ] `CourseResource.java` (课程资源)
- [ ] `CourseTag.java` (课程标签)
- [ ] `CourseTagRelation.java` (课程标签关联)
- [ ] `CourseReview.java` (课程评价)

### 4.2 课程DTO
- [ ] `CourseQueryRequest.java`
  ```java
  - keyword, categoryId, teacherId
  - difficultyLevel, minPrice, maxPrice
  - status, isHot, isRecommend
  - sortBy, sortOrder
  - pageNum, pageSize
  ```

- [ ] `CourseCreateRequest.java`
- [ ] `CourseUpdateRequest.java`
- [ ] `CourseDetailVO.java` (详情视图)
  ```java
  - 课程基本信息
  - 分类信息
  - 教师信息
  - 章节列表
  - 标签列表
  - 评价统计
  ```

### 4.3 课程Controller
- [ ] `CourseController.java` (学生端)
  ```java
  - GET /api/courses - 课程列表
  - GET /api/courses/{id} - 课程详情
  - GET /api/courses/hot - 热门课程
  - GET /api/courses/recommend - 推荐课程
  - POST /api/courses/{id}/view - 增加浏览量
  - GET /api/courses/{id}/reviews - 课程评价列表
  - POST /api/courses/{id}/reviews - 发表评价
  ```

- [ ] `TeacherCourseController.java` (教师端)
  ```java
  - GET /api/teacher/courses - 我的课程列表
  - POST /api/teacher/courses - 创建课程
  - PUT /api/teacher/courses/{id} - 更新课程
  - DELETE /api/teacher/courses/{id} - 删除课程
  - POST /api/teacher/courses/{id}/chapters - 添加章节
  - POST /api/teacher/courses/{id}/resources - 上传资源
  ```

- [ ] `AdminCourseController.java` (管理员端)
  ```java
  - GET /api/admin/courses - 所有课程列表
  - PUT /api/admin/courses/{id}/audit - 审核课程
  - PUT /api/admin/courses/{id}/status - 上下架
  ```

### 4.4 课程Service
- [ ] `ICourseService.java` 接口
  ```java
  - getCourseList(CourseQueryRequest request)
  - getCourseDetail(Long id)
  - createCourse(CourseCreateRequest request)
  - updateCourse(Long id, CourseUpdateRequest request)
  - deleteCourse(Long id)
  - publishCourse(Long id)
  - unpublishCourse(Long id)
  - incrementViewCount(Long id)
  - getHotCourses(Integer limit)
  - getRecommendCourses(Integer limit)
  ```

- [ ] `CourseServiceImpl.java` 实现
  ```java
  - 实现课程CRUD
  - 实现搜索和筛选(MyBatis动态SQL)
  - 实现浏览量更新(Redis计数器 + 定时同步DB)
  - 实现评分计算(平均分)
  ```

### 4.5 课程分类Service
- [ ] `ICourseCategoryService.java`
  ```java
  - getCategoryTree() - 获取分类树
  - createCategory(CategoryCreateRequest request)
  - updateCategory(Long id, CategoryUpdateRequest request)
  - deleteCategory(Long id)
  ```

### 4.6 课程章节Service
- [ ] `ICourseChapterService.java`
  ```java
  - getChaptersByCourseId(Long courseId)
  - createChapter(ChapterCreateRequest request)
  - updateChapter(Long id, ChapterUpdateRequest request)
  - deleteChapter(Long id)
  - sortChapters(Long courseId, List<Long> chapterIds)
  ```

### 4.7 课程资源Service
- [ ] `ICourseResourceService.java`
  ```java
  - uploadResource(Long chapterId, MultipartFile file)
  - deleteResource(Long id)
  - getResourceUrl(Long id) - 生成临时访问URL
  ```

### 4.8 课程评价Service
- [ ] `ICourseReviewService.java`
  ```java
  - getReviewList(Long courseId, Integer pageNum, Integer pageSize)
  - createReview(ReviewCreateRequest request)
  - deleteReview(Long id)
  - likeReview(Long id)
  ```

### 4.9 Mapper层
- [ ] `CourseMapper.java` + XML
  ```java
  - 基础CRUD
  - selectByCondition(CourseQueryRequest) - 动态查询
  - incrementViewCount(Long id)
  - incrementEnrolledCount(Long id)
  - decrementStock(Long id, Integer version) - 乐观锁扣减
  - updateRating(Long id, BigDecimal rating, Integer count)
  ```

- [ ] `CourseCategoryMapper.java` + XML
- [ ] `CourseChapterMapper.java` + XML
- [ ] `CourseResourceMapper.java` + XML
- [ ] `CourseTagMapper.java` + XML
- [ ] `CourseReviewMapper.java` + XML

---

## 模块5：选课管理模块（高并发核心）

### 5.1 选课实体类
- [ ] `Enrollment.java`
  ```java
  - id, studentId, courseId, orderId
  - enrollmentTime, status, progress
  - studyDuration, lastStudyTime, completeTime
  - score, certificateUrl
  - createTime, updateTime
  ```

### 5.2 选课DTO
- [ ] `EnrollRequest.java`
  ```java
  - courseId: Long
  ```

- [ ] `EnrollmentVO.java`
  ```java
  - 选课信息
  - 课程信息
  - 学习进度
  - 完成状态
  ```

### 5.3 选课Controller
- [ ] `EnrollmentController.java`
  ```java
  - POST /api/enrollments - 选课
  - DELETE /api/enrollments/{id} - 退课
  - GET /api/enrollments/my - 我的课程列表
  - GET /api/enrollments/{id} - 选课详情
  - GET /api/enrollments/{id}/progress - 学习进度
  - GET /api/enrollments/check/{courseId} - 检查选课状态
  ```

### 5.4 选课Service（核心）
- [ ] `IEnrollmentService.java` 接口
  ```java
  - enroll(Long studentId, Long courseId)
  - cancelEnrollment(Long enrollmentId)
  - getMyEnrollments(Long studentId, Integer pageNum, Integer pageSize)
  - getEnrollmentDetail(Long id)
  - checkEnrollmentStatus(Long studentId, Long courseId)
  - updateProgress(Long enrollmentId, BigDecimal progress)
  ```

- [ ] `EnrollmentServiceImpl.java` 实现（高并发处理）
  ```java
  // 1. 令牌桶限流
  - 使用Guava RateLimiter或Redisson RateLimiter
  - 限制每秒请求数(如100 QPS)
  
  // 2. 本地缓存防重(第一级)
  - 使用Caffeine缓存
  - key: studentId:courseId
  - 过期时间: 5分钟
  
  // 3. Redis防重(第二级)
  - key: enroll:check:studentId:courseId
  - setIfAbsent操作
  - 过期时间: 5分钟
  
  // 4. Redis预减库存
  - key: course:stock:courseId
  - decrement操作
  - 库存不足则回滚
  
  // 5. 发送MQ消息
  - topic: enrollment-topic
  - 消息体: EnrollmentMessage(studentId, courseId, timestamp)
  - 异步发送
  
  // 6. 返回排队中状态
  - 返回"选课请求已提交，请稍候查看结果"
  ```

### 5.5 MQ消息处理
- [ ] `EnrollmentMessage.java` (消息体)
  ```java
  - studentId: Long
  - courseId: Long
  - timestamp: Long
  ```

- [ ] `EnrollmentProducer.java` (生产者)
  ```java
  - sendEnrollmentMessage(EnrollmentMessage message)
  ```

- [ ] `EnrollmentConsumer.java` (消费者)
  ```java
  @RocketMQMessageListener(
    topic = "enrollment-topic",
    consumerGroup = "enrollment-consumer-group"
  )
  
  处理流程:
  1. 获取分布式锁(Redisson)
     - key: enroll:lock:courseId
     - tryLock(5秒等待, 10秒自动释放)
  
  2. 数据库防重(第三级)
     - 查询enrollment表是否已存在
     - 存在则直接返回
  
  3. 扣减数据库库存(乐观锁)
     - UPDATE course SET stock = stock - 1, version = version + 1
       WHERE id = ? AND stock > 0 AND version = ?
     - 更新失败则库存不足
  
  4. 创建选课记录
     - INSERT INTO enrollment
  
  5. 释放锁
  
  6. 发送选课成功通知(WebSocket/轮询)
  ```

### 5.6 Redis缓存预热
- [ ] `CourseStockInitializer.java`
  ```java
  @PostConstruct
  public void initCourseStock() {
    // 应用启动时
    // 从数据库加载所有课程库存到Redis
    List<Course> courses = courseMapper.selectAll();
    for (Course course : courses) {
      String key = RedisKeyConstant.COURSE_STOCK_PREFIX + course.getId();
      redisTemplate.opsForValue().set(key, course.getStock());
    }
  }
  ```

### 5.7 定时任务
- [ ] `StockSyncTask.java`
  ```java
  @Scheduled(cron = "0 */5 * * * ?") // 每5分钟
  public void syncStockToDb() {
    // 将Redis中的库存同步回数据库
    // 处理可能的不一致情况
  }
  ```

### 5.8 Mapper层
- [ ] `EnrollmentMapper.java` + XML
  ```java
  - insert(Enrollment enrollment)
  - selectById(Long id)
  - selectByStudentAndCourse(Long studentId, Long courseId)
  - selectByStudentId(Long studentId, PageHelper)
  - updateProgress(Long id, BigDecimal progress, Integer duration)
  - deleteById(Long id)
  ```

---

## 模块6：学习管理模块

### 6.1 学习进度实体类
- [ ] `StudyProgress.java`
  ```java
  - id, enrollmentId, chapterId, resourceId
  - progress, studyDuration, isCompleted
  - lastPosition (视频播放位置)
  - createTime, updateTime
  ```

- [ ] `StudyNote.java` (学习笔记)
  ```java
  - id, studentId, courseId, chapterId
  - noteTitle, noteContent, videoTime
  - isPublic, createTime, updateTime
  ```

### 6.2 学习DTO
- [ ] `StudyProgressUpdateRequest.java`
  ```java
  - chapterId, resourceId
  - progress, studyDuration
  - lastPosition
  ```

- [ ] `StudyNoteCreateRequest.java`
- [ ] `StudyNoteUpdateRequest.java`

### 6.3 学习Controller
- [ ] `StudyController.java`
  ```java
  - GET /api/study/courses/{courseId}/chapters - 获取章节列表
  - GET /api/study/chapters/{chapterId}/resources - 获取资源列表
  - POST /api/study/progress - 更新学习进度
  - GET /api/study/progress/{enrollmentId} - 获取学习进度
  - POST /api/study/notes - 创建笔记
  - GET /api/study/notes - 我的笔记列表
  - PUT /api/study/notes/{id} - 更新笔记
  - DELETE /api/study/notes/{id} - 删除笔记
  - GET /api/study/calendar - 学习日历
  ```

### 6.4 学习Service
- [ ] `IStudyService.java` 接口
  ```java
  - updateProgress(StudyProgressUpdateRequest request)
  - getStudyProgress(Long enrollmentId)
  - getChapterProgress(Long enrollmentId, Long chapterId)
  - completeChapter(Long enrollmentId, Long chapterId)
  - getStudyCalendar(Long studentId, String month)
  ```

- [ ] `StudyServiceImpl.java` 实现
  ```java
  - 更新章节进度
  - 计算课程总进度
  - 更新enrollment表的progress字段
  - 记录学习时长
  - 判断章节/课程完成状态
  ```

### 6.5 笔记Service
- [ ] `IStudyNoteService.java`
  ```java
  - createNote(StudyNoteCreateRequest request)
  - updateNote(Long id, StudyNoteUpdateRequest request)
  - deleteNote(Long id)
  - getNoteList(Long studentId, Long courseId, Integer pageNum, Integer pageSize)
  - getPublicNotes(Long courseId, Integer pageNum, Integer pageSize)
  ```

### 6.6 Mapper层
- [ ] `StudyProgressMapper.java` + XML
  ```java
  - insert(StudyProgress progress)
  - selectByEnrollmentAndChapter(Long enrollmentId, Long chapterId, Long resourceId)
  - updateProgress(StudyProgress progress)
  - selectByEnrollmentId(Long enrollmentId)
  - calculateTotalProgress(Long enrollmentId)
  ```

- [ ] `StudyNoteMapper.java` + XML

---

## 模块7：技能评估