# IT 技能培训智能选课系统 - 迭代计划 (Sprints)

> 文档版本：v1.0.0
> 最后更新：2025-12-14
> 文档状态：✅ 已完成
> 关联文档：[Backlog.md](Backlog.md) | [PRD.md](../01-Requirements/PRD.md)

---

## 目录

1. [Sprint 概览](#1-sprint-概览)
2. [Sprint 1：基础骨架](#2-sprint-1基础骨架)
3. [Sprint 2：报名闭环](#3-sprint-2报名闭环)
4. [Sprint 3：AI 推荐与统计](#4-sprint-3ai-推荐与统计)
5. [Sprint 4：测试与交付](#5-sprint-4测试与交付)
6. [里程碑检查点](#6-里程碑检查点)
7. [风险总览与降级策略](#7-风险总览与降级策略)

---

## 1. Sprint 概览

### 1.1 Sprint 时间线

```
Week 1      Week 2      Week 3      Week 4      Week 5      Week 6      Week 7      Week 8
  │           │           │           │           │           │           │           │
  ├───────────┴───────────┼───────────┴───────────┼───────────┴───────────┼───────────┴───────────┤
  │      Sprint 1         │      Sprint 2         │      Sprint 3         │      Sprint 4         │
  │   基础骨架 + 认证     │   报名闭环 + 三端     │   AI推荐 + 统计       │   测试 + 部署 + 答辩  │
  │      + CRUD           │                       │                       │                       │
  ├───────────────────────┼───────────────────────┼───────────────────────┼───────────────────────┤
  │ M1: 框架搭建          │ M3: 报名闭环          │ M4: AI上线            │ M5: 测试完成          │
  │ M2: CRUD完成          │                       │                       │ M6: 答辩通过          │
  └───────────────────────┴───────────────────────┴───────────────────────┴───────────────────────┘
```

### 1.2 Sprint 摘要表

| Sprint | 目标 | Story 数 | 关键交付 | 风险等级 |
|--------|------|----------|----------|----------|
| Sprint 1 | 基础骨架 + 认证 + CRUD | 15 | 管理端可用 | 低 |
| Sprint 2 | 报名闭环 + 三端页面 | 6 | 完整报名流程 | 中 |
| Sprint 3 | AI 推荐 + 统计看板 | 7 | AI 功能可演示 | 中 |
| Sprint 4 | 测试 + 部署 + 答辩 | 3 + 补充 | 生产就绪 | 低 |

---

## 2. Sprint 1：基础骨架

### 2.1 Sprint 目标

> **目标**：完成前后端项目骨架搭建、认证模块、用户/课程/班期 CRUD，实现管理端基本可用。

### 2.2 Story 列表

| Story ID | Story 名称 | 优先级 | 状态 |
|----------|------------|--------|------|
| S1.1 | 用户注册 | P0 | ⬜ 待开发 |
| S1.2 | 用户登录 | P0 | ⬜ 待开发 |
| S1.4 | 用户登出 | P0 | ⬜ 待开发 |
| S2.1 | 用户列表查询 | P0 | ⬜ 待开发 |
| S2.2 | 新增用户 | P0 | ⬜ 待开发 |
| S2.3 | 编辑用户 | P0 | ⬜ 待开发 |
| S3.1 | 课程列表查询 | P0 | ⬜ 待开发 |
| S3.2 | 新增课程 | P0 | ⬜ 待开发 |
| S3.3 | 编辑课程 | P0 | ⬜ 待开发 |
| S3.4 | 上架/下架课程 | P0 | ⬜ 待开发 |
| S4.1 | 班期列表查询 | P0 | ⬜ 待开发 |
| S4.2 | 新增班期 | P0 | ⬜ 待开发 |
| S4.3 | 编辑班期 | P0 | ⬜ 待开发 |
| S4.4 | 班期状态管理 | P0 | ⬜ 待开发 |

**Sprint 1 Story 总数：14 个**

### 2.3 技术任务拆分

#### 后端任务

| 任务 | 描述 | 优先级 |
|------|------|--------|
| T1.1 | Spring Boot 项目初始化（依赖配置） | P0 |
| T1.2 | 数据库表创建（user, course, class_session） | P0 |
| T1.3 | 公共模块：统一响应体、异常处理、参数校验 | P0 |
| T1.4 | Spring Security + JWT 认证配置 | P0 |
| T1.5 | 认证模块 API（register, login, logout） | P0 |
| T1.6 | 用户管理 API（CRUD） | P0 |
| T1.7 | 课程管理 API（CRUD + 上下架） | P0 |
| T1.8 | 班期管理 API（CRUD + 状态管理） | P0 |
| T1.9 | Swagger/OpenAPI 文档配置 | P1 |

#### 前端任务

| 任务 | 描述 | 优先级 |
|------|------|--------|
| T1.10 | Vue 3 项目初始化（Vite + Pinia + Router） | P0 |
| T1.11 | Element Plus 集成 + 主题配置 | P0 |
| T1.12 | Axios 封装（请求拦截、响应处理、Token 注入） | P0 |
| T1.13 | 路由配置 + 权限守卫 | P0 |
| T1.14 | 管理端布局组件（侧边栏 + 顶栏 + 内容区） | P0 |
| T1.15 | 登录页面 | P0 |
| T1.16 | 用户管理页面（列表 + 弹窗表单） | P0 |
| T1.17 | 课程管理页面（列表 + 弹窗表单） | P0 |
| T1.18 | 班期管理页面（列表 + 弹窗表单） | P0 |

### 2.4 交付物清单

| 类型 | 交付物 | 验收标准 |
|------|--------|----------|
| 后端 | Spring Boot 项目 | 能启动，Swagger 可访问 |
| 后端 | 认证 API | 注册/登录/登出 正常 |
| 后端 | 用户管理 API | CRUD 完整 |
| 后端 | 课程管理 API | CRUD + 上下架 完整 |
| 后端 | 班期管理 API | CRUD + 状态 完整 |
| 前端 | Vue 3 项目 | 能启动，路由正常 |
| 前端 | 登录页 | 登录成功跳转后台 |
| 前端 | 管理端布局 | 侧边栏菜单可点击 |
| 前端 | 用户管理页 | 列表查询 + 新增/编辑弹窗 |
| 前端 | 课程管理页 | 列表查询 + 新增/编辑弹窗 |
| 前端 | 班期管理页 | 列表查询 + 新增/编辑弹窗 |
| 数据库 | schema.sql | 3 张表创建成功 |

### 2.5 风险与降级

| 风险 | 概率 | 影响 | 降级策略 |
|------|------|------|----------|
| JWT 配置复杂 | 低 | 中 | 先用简单 Session，后续迁移 |
| 前端路由权限 | 低 | 低 | 先实现功能，权限后续完善 |
| 表单校验复杂 | 低 | 低 | 先后端校验，前端逐步完善 |

### 2.6 演示脚本 (Sprint 1 Review)

```
演示时长：5 分钟

1. [0:00-0:30] 项目启动展示
   - 后端：启动 Spring Boot，显示 Swagger 页面
   - 前端：启动 Vue 项目，显示登录页

2. [0:30-1:00] 管理员登录
   - 输入 admin / admin123
   - 验证：成功进入管理后台

3. [1:00-2:00] 用户管理演示
   - 查看用户列表
   - 新增讲师账号（填写表单 → 保存 → 列表刷新）
   - 编辑用户信息

4. [2:00-3:30] 课程管理演示
   - 查看课程列表（空）
   - 新增课程"Java 基础"（填写编码、名称、分类、难度）
   - 上架课程
   - 编辑课程信息

5. [3:30-5:00] 班期管理演示
   - 查看班期列表（空）
   - 为"Java 基础"创建班期（选择讲师、设置时间、名额 20）
   - 修改班期状态为"报名中"
   - 验证：列表显示班期信息

演示结束，进入 Q&A
```

---

## 3. Sprint 2：报名闭环

### 3.1 Sprint 目标

> **目标**：完成报名核心功能，实现学员端浏览/报名/取消，讲师端查看学员，管理端报名管理。

### 3.2 Story 列表

| Story ID | Story 名称 | 优先级 | 状态 |
|----------|------------|--------|------|
| S5.1 | 学员浏览课程 | P0 | ⬜ 待开发 |
| S5.2 | 学员在线报名 | P0 | ⬜ 待开发 |
| S5.3 | 学员查看我的报名 | P0 | ⬜ 待开发 |
| S5.4 | 学员取消报名 | P0 | ⬜ 待开发 |
| S5.5 | 讲师查看学员名单 | P0 | ⬜ 待开发 |
| S5.6 | 管理员报名管理 | P0 | ⬜ 待开发 |

**Sprint 2 Story 总数：6 个**

### 3.3 技术任务拆分

#### 后端任务

| 任务 | 描述 | 优先级 |
|------|------|--------|
| T2.1 | enrollment 表创建 | P0 |
| T2.2 | 报名 API（创建报名 + 名额控制） | P0 |
| T2.3 | 取消报名 API（状态更新 + 名额回退） | P0 |
| T2.4 | 我的报名 API（学员查询自己的报名） | P0 |
| T2.5 | 学员名单 API（讲师查询班期学员） | P0 |
| T2.6 | 报名管理 API（管理员全量查询） | P0 |
| T2.7 | 名额控制单元测试 | P0 |

#### 前端任务

| 任务 | 描述 | 优先级 |
|------|------|--------|
| T2.8 | 学员端布局组件 | P0 |
| T2.9 | 学员端首页（课程卡片列表） | P0 |
| T2.10 | 课程详情页（班期列表 + 报名按钮） | P0 |
| T2.11 | 我的报名页面 | P0 |
| T2.12 | 讲师端布局组件 | P0 |
| T2.13 | 讲师端我的班期页面 | P0 |
| T2.14 | 学员名单弹窗/页面 | P0 |
| T2.15 | 管理端报名管理页面 | P0 |

### 3.4 交付物清单

| 类型 | 交付物 | 验收标准 |
|------|--------|----------|
| 后端 | enrollment 表 | 表结构正确 |
| 后端 | 报名 API | 名额控制正确，防重复 |
| 后端 | 取消 API | 名额回退正确 |
| 前端 | 学员端首页 | 课程卡片展示正常 |
| 前端 | 课程详情页 | 班期列表 + 报名功能 |
| 前端 | 我的报名页 | 报名记录 + 取消功能 |
| 前端 | 讲师端页面 | 我的班期 + 学员名单 |
| 前端 | 报名管理页 | 管理员可查看所有报名 |
| 测试 | 名额控制测试 | 并发测试通过 |

### 3.5 风险与降级

| 风险 | 概率 | 影响 | 降级策略 |
|------|------|------|----------|
| 名额超卖 | 中 | 高 | 使用数据库事务 + 条件更新，确保原子性 |
| 并发问题 | 中 | 高 | MVP 用悲观锁，二期考虑 Redis |
| 状态流转错误 | 低 | 中 | 严格校验当前状态，拒绝非法流转 |

### 3.6 演示脚本 (Sprint 2 Review)

```
演示时长：6 分钟

1. [0:00-0:30] 准备数据
   - 确认已有课程"Java 基础"和班期（名额 20，状态"报名中"）

2. [0:30-1:30] 学员注册与登录
   - 新窗口：打开学员端
   - 注册账号 student1
   - 登录进入学员首页

3. [1:30-2:30] 课程浏览与报名
   - 浏览课程列表（卡片展示）
   - 按分类筛选
   - 点击"Java 基础"进入详情
   - 选择班期，点击"立即报名"
   - 验证：提示"报名成功"

4. [2:30-3:30] 查看与取消报名
   - 进入"我的报名"页面
   - 查看报名记录
   - 点击"取消报名"，输入原因
   - 验证：状态变"已取消"

5. [3:30-4:30] 重新报名验证
   - 返回课程详情，再次报名
   - 验证：报名成功

6. [4:30-5:30] 讲师端演示
   - 新窗口：讲师登录
   - 查看"我的班期"
   - 点击班期查看学员名单
   - 验证：显示 student1

7. [5:30-6:00] 管理端报名管理
   - 管理员查看报名列表
   - 按课程/状态筛选

演示结束，进入 Q&A
```

---

## 4. Sprint 3：AI 推荐与统计

### 4.1 Sprint 目标

> **目标**：完成 AI 智能推荐功能（含降级策略），实现统计看板。

### 4.2 Story 列表

| Story ID | Story 名称 | 优先级 | 状态 |
|----------|------------|--------|------|
| S6.1 | AI 推荐入口 | P0 | ✅ 已完成 |
| S6.2 | AI 推荐结果展示 | P0 | ✅ 已完成 |
| S6.3 | AI 推荐降级策略 | P0 | ✅ 已完成 |
| S6.4 | AI 推荐日志记录 | P0 | ✅ 已完成 |
| S7.1 | 数据概览 | P1 | ✅ 已完成 |
| S7.2 | 课程热度排行 | P1 | ✅ 已完成 |
| S7.3 | 报名趋势图 | P1 | ✅ 已完成 |

**Sprint 3 Story 总数：7 个**

### 4.3 技术任务拆分

#### 后端任务

| 任务 | 描述 | 优先级 |
|------|------|--------|
| T3.1 | ai_recommend_log 表创建 | P0 |
| T3.2 | Spring AI 集成配置 | P0 |
| T3.3 | AI 推荐 API（/api/ai/recommend） | P0 |
| T3.4 | AI 降级策略实现 | P0 |
| T3.5 | 推荐日志记录服务 | P0 |
| T3.6 | 统计 API（概览数据） | P1 |
| T3.7 | 统计 API（课程热度 TOP 10） | P1 |
| T3.8 | 统计 API（报名趋势） | P1 |

#### 前端任务

| 任务 | 描述 | 优先级 |
|------|------|--------|
| T3.9 | AI 推荐页面（输入框 + 结果展示） | P0 |
| T3.10 | 推荐结果卡片组件 | P0 |
| T3.11 | 降级提示展示 | P0 |
| T3.12 | 统计看板页面布局 | P1 |
| T3.13 | 数据概览卡片 | P1 |
| T3.14 | ECharts 集成 | P1 |
| T3.15 | 课程热度柱状图 | P1 |
| T3.16 | 报名趋势折线图 | P1 |

### 4.4 交付物清单

| 类型 | 交付物 | 验收标准 |
|------|--------|----------|
| 后端 | ai_recommend_log 表 | 表结构正确 |
| 后端 | AI 推荐 API | 返回课程+理由+顺序 |
| 后端 | 降级策略 | AI 超时返回热门课程 |
| 后端 | 统计 API | 数据正确 |
| 前端 | AI 推荐页 | 输入→Loading→结果 |
| 前端 | 统计看板 | 概览+柱状图+折线图 |
| 数据库 | 推荐日志 | 每次请求有记录 |

### 4.5 风险与降级

| 风险 | 概率 | 影响 | 降级策略 |
|------|------|------|----------|
| AI API 不稳定 | 中 | 高 | 实现降级，返回热门课程 |
| AI 响应慢 | 中 | 中 | 设置 10s 超时，触发降级 |
| API Key 配额 | 低 | 高 | 使用免费额度或本地模型 |
| ECharts 集成 | 低 | 低 | 使用简单表格替代 |

### 4.6 演示脚本 (Sprint 3 Review)

```
演示时长：5 分钟

1. [0:00-1:00] AI 推荐演示
   - 学员登录
   - 点击"智能推荐"入口
   - 输入："想学后端开发，目前零基础"
   - 等待 AI 响应（显示 Loading）
   - 查看推荐结果：
     * 推荐课程列表（带顺序标注）
     * 推荐理由
     * 建议学习顺序

2. [1:00-1:30] 推荐结果交互
   - 点击推荐课程卡片
   - 跳转到课程详情页
   - 可直接报名

3. [1:30-2:30] AI 降级演示（可选）
   - 模拟 AI 服务不可用
   - 再次请求推荐
   - 验证：返回热门课程 + 降级提示

4. [2:30-3:30] 统计看板演示
   - 管理员登录
   - 进入统计看板页面
   - 查看数据概览（课程数、学员数、报名数）
   - 查看课程热度 TOP 10 柱状图

5. [3:30-4:30] 报名趋势演示
   - 查看报名趋势折线图
   - 切换时间范围（7天/30天）

6. [4:30-5:00] 推荐日志查看（后台）
   - 数据库查看 ai_recommend_log 表
   - 验证：记录完整

演示结束，进入 Q&A
```

---

## 5. Sprint 4：测试与交付

### 5.1 Sprint 目标

> **目标**：补齐测试、完成部署配置、准备答辩材料。

### 5.2 Story 列表（补充功能）

| Story ID | Story 名称 | 优先级 | 状态 |
|----------|------------|--------|------|
| S1.3 | Token 刷新 | P1 | ⬜ 待开发 |
| S2.4 | 删除用户 | P1 | ⬜ 待开发 |
| S3.5 | 删除课程 | P1 | ⬜ 待开发 |
| S4.5 | 删除班期 | P1 | ⬜ 待开发 |

**Sprint 4 补充 Story：4 个**

### 5.3 技术任务拆分

#### 测试任务

| 任务 | 描述 | 优先级 |
|------|------|--------|
| T4.1 | 认证模块单元测试 | P0 |
| T4.2 | 用户管理单元测试 | P0 |
| T4.3 | 课程管理单元测试 | P0 |
| T4.4 | 班期管理单元测试 | P0 |
| T4.5 | 报名模块单元测试（含名额控制） | P0 |
| T4.6 | AI 推荐单元测试（含降级） | P0 |
| T4.7 | 集成测试：报名全流程 | P0 |
| T4.8 | 前端 E2E 测试（可选） | P1 |

#### 部署任务

| 任务 | 描述 | 优先级 |
|------|------|--------|
| T4.9 | Dockerfile 编写（后端） | P0 |
| T4.10 | Dockerfile 编写（前端 Nginx） | P0 |
| T4.11 | docker-compose.yml 编写 | P0 |
| T4.12 | 部署文档编写 | P0 |
| T4.13 | 初始化数据脚本 | P0 |

#### 答辩材料

| 任务 | 描述 | 优先级 |
|------|------|--------|
| T4.14 | 答辩 PPT 制作 | P0 |
| T4.15 | 系统演示视频录制 | P1 |
| T4.16 | 技术文档整理 | P0 |

### 5.4 交付物清单

| 类型 | 交付物 | 验收标准 |
|------|--------|----------|
| 测试 | 单元测试 | 覆盖率 > 60% |
| 测试 | 集成测试 | 核心流程通过 |
| 部署 | Docker 配置 | 一键启动成功 |
| 部署 | 部署文档 | 步骤清晰可执行 |
| 答辩 | PPT | 15 页以内 |
| 答辩 | 演示视频 | 8 分钟以内 |

### 5.5 风险与降级

| 风险 | 概率 | 影响 | 降级策略 |
|------|------|------|----------|
| 测试覆盖不足 | 中 | 中 | 优先核心模块，其他手动测试 |
| Docker 问题 | 低 | 中 | 提供本地运行说明作为备选 |
| 答辩时间紧 | 中 | 高 | 提前准备，多次演练 |

### 5.6 演示脚本（最终答辩）

```
答辩演示时长：8 分钟

【第一部分：系统介绍 1.5 分钟】

1. [0:00-0:30] 项目背景
   - 培训选课痛点
   - 项目目标

2. [0:30-1:30] 技术架构
   - 展示架构图
   - 技术栈说明
   - 亮点介绍（AI 推荐、名额控制）

【第二部分：功能演示 5 分钟】

3. [1:30-2:00] 管理员登录
   - admin / admin123
   - 进入管理后台

4. [2:00-2:30] 课程管理
   - 展示已有课程
   - 快速新增/编辑演示

5. [2:30-3:00] 班期管理
   - 展示班期列表
   - 创建新班期（选讲师、设名额）

6. [3:00-3:30] 学员注册登录
   - 切换到学员端
   - 快速注册/登录

7. [3:30-4:00] 课程浏览与报名
   - 浏览课程卡片
   - 选择班期报名
   - 验证名额减少

8. [4:00-4:30] AI 智能推荐（亮点）
   - 输入学习目标
   - 展示推荐结果
   - 说明 AI 实现方式

9. [4:30-5:00] 取消报名
   - 在"我的报名"取消
   - 验证名额回退

10. [5:00-5:30] 讲师端
    - 讲师查看学员名单

11. [5:30-6:00] 统计看板
    - 展示数据概览
    - 展示图表

【第三部分：技术难点 1.5 分钟】

12. [6:00-6:30] 名额控制
    - 说明并发问题
    - 展示解决方案

13. [6:30-7:00] AI 推荐
    - Spring AI 集成
    - 降级策略

14. [7:00-7:30] 安全设计
    - JWT 认证
    - 权限控制

【第四部分：总结 0.5 分钟】

15. [7:30-8:00] 总结
    - 项目收获
    - 未来展望

答辩结束，等待提问
```

---

## 6. 里程碑检查点

| 里程碑 | 时间点 | 检查项 | 通过标准 |
|--------|--------|--------|----------|
| M1 框架搭建 | Sprint 1 Day 3 | 前后端项目可运行 | 启动无报错 |
| M2 CRUD 完成 | Sprint 1 End | 课程/班期 CRUD | 全部 API 可调用 |
| M3 报名闭环 | Sprint 2 End | 报名→取消流程 | 名额控制正确 |
| M4 AI 上线 | Sprint 3 Day 5 | AI 推荐可用 | 返回推荐结果 |
| M5 测试完成 | Sprint 4 Day 5 | 核心测试通过 | 通过率 > 90% |
| M6 答辩通过 | Sprint 4 End | 答辩演示成功 | 评委通过 |

### 里程碑检查表

```
M1 框架搭建 ──────────────────────────────────────────────────
  [ ] Spring Boot 项目启动成功
  [ ] Vue 3 项目启动成功
  [ ] 数据库连接正常
  [ ] 登录接口可调用

M2 CRUD 完成 ──────────────────────────────────────────────────
  [ ] 用户 CRUD 完整
  [ ] 课程 CRUD + 上下架 完整
  [ ] 班期 CRUD + 状态管理 完整
  [ ] 前端管理页面可操作

M3 报名闭环 ──────────────────────────────────────────────────
  [ ] 学员可浏览课程
  [ ] 学员可报名（名额扣减正确）
  [ ] 学员可取消（名额回退正确）
  [ ] 重复报名被拒绝
  [ ] 满员报名被拒绝
  [ ] 讲师可查看学员名单

M4 AI 上线 ──────────────────────────────────────────────────
  [x] AI 推荐接口可调用
  [x] 返回课程 + 理由 + 顺序
  [x] 降级策略生效
  [x] 推荐日志记录完整

M5 测试完成 ──────────────────────────────────────────────────
  [x] 单元测试覆盖率 > 60%
  [x] 核心流程集成测试通过
  [ ] 无阻塞性 Bug

M6 答辩通过 ──────────────────────────────────────────────────
  [x] Docker 部署成功
  [ ] 演示流程完整
  [ ] PPT 准备完成
  [ ] 答辩通过
```

---

## 7. 风险总览与降级策略

### 7.1 风险矩阵

```
影响 ↑
  高 │     ②AI不可用      ①名额超卖
     │
  中 │  ④进度延误      ③并发问题
     │
  低 │  ⑤前端兼容      ⑥测试不足
     │
     └──────────────────────────────→ 概率
          低          中          高
```

### 7.2 风险应对详表

| # | 风险 | 概率 | 影响 | 应对策略 | 负责人 |
|---|------|------|------|----------|--------|
| ① | 名额超卖 | 低 | 高 | 数据库事务 + 条件更新 | 后端 |
| ② | AI 服务不可用 | 中 | 高 | 降级返回热门课程 | 后端 |
| ③ | 并发问题 | 中 | 中 | MVP 用悲观锁，压测验证 | 后端 |
| ④ | 进度延误 | 中 | 中 | 每周检视，及时调整范围 | SM |
| ⑤ | 前端兼容性 | 低 | 低 | 锁定 Chrome，其他降级 | 前端 |
| ⑥ | 测试覆盖不足 | 中 | 低 | 优先核心模块，手动补充 | 测试 |

### 7.3 降级策略汇总

| 场景 | 正常方案 | 降级方案 |
|------|----------|----------|
| AI 推荐 | Spring AI 调用大模型 | 返回热门课程 TOP 5 |
| 名额控制 | 数据库事务 + 条件更新 | 悲观锁 FOR UPDATE |
| 统计图表 | ECharts 可视化 | 纯数字表格 |
| Docker 部署 | docker-compose up | 本地 java -jar + npm run dev |
| 前端 E2E | Cypress 自动化 | 手动测试用例 |

---

## 修订记录

| 版本 | 日期 | 修改人 | 修改内容 |
|------|------|--------|----------|
| v1.0.0 | 2025-12-14 | SM | 初始版本 |
