# 00. 重构总览 (Refactor Overview)

## 1. 核心理念 (Core Philosophy)

**"Pattern-Driven Architecture" (模式驱动架构)**

为了彻底避免 "AI 模板风" (Bento Grids, Heavy Cards) 并严格执行 "Apple-like Minimal" 风格，我们将采用一种强制性的架构分层。

**特别说明：为什么这适合独立开发者？**
作为一个独立开发者，你没有时间和精力去为每个页面单独设计 UI。这套架构看似有"约束"，实则是为了**减少决策疲劳**。
-   **不用纠结**: 不用每次都想 "这个按钮该放左边还是右边？间距是 16px 还是 20px？"。
-   **自动对齐**: 只要使用了 `<ListRow>`，你的页面就自动拥有了 Apple 级的对齐和质感。
-   **AI 辅助**: 这套规则能防止 AI 生成乱七八糟的代码。你只需要告诉 AI "用 ListRow 展示数据"，它就只能生成符合规范的代码。

## 2. 技术栈 (Tech Stack)

-   **Framework**: Vue 3 (Composition API) + TypeScript
-   **Build Tool**: Vite
-   **Styling**: Tailwind CSS (仅通过 Design Tokens 使用)
-   **UI Primitives**: **PrimeVue (Unstyled Mode)**
    -   *选择理由*: PrimeVue 的 Unstyled 模式允许我们完全剥离默认样式，仅使用其功能逻辑 (Accessibility, Keyboard Nav)，从而实现 100% 的自定义外观。
-   **State Management**: Pinia
-   **Router**: Vue Router
-   **Icons**: Iconify (SVG) - 仅使用极简线条图标

## 3. 目录结构 (Directory Structure)

这是实现 "Apple-like" 风格的关键。我们将 **视觉语言 (Design System)** 与 **业务逻辑 (Features)** 物理分离。

```
src/
├── design-system/           # [核心] 视觉语言的唯一来源
│   ├── tokens/              # Design Tokens (TypeScript Constants)
│   │   ├── colors.ts        # 语义化颜色 (bg-primary, text-secondary)
│   │   ├── typography.ts    # 字体排印 (text-h1, text-body)
│   │   └── spacing.ts       # 间距系统 (4px grid)
│   ├── primitives/          # 无样式的原子组件 (基于 PrimeVue Unstyled)
│   │   ├── Button.vue       # 仅包含交互逻辑和极简样式的按钮
│   │   ├── Input.vue
│   │   └── Modal.vue
│   └── patterns/            # [关键] 预定义的 UI 模式 (强制布局)
│       ├── ListRow.vue      # 列表行 (左图/中标题/右操作)
│       ├── SectionHeader.vue# 分区标题 (大字 + 分割线)
│       ├── DescriptionList.vue # 详情列表 (Label-Value 对)
│       └── PageLayout.vue   # 标准页面容器 (限制最大宽度，居中)
│
├── features/                # 业务逻辑 (按领域划分)
│   ├── auth/
│   ├── course/
│   │   ├── components/      # 业务组件 (组合 Patterns)
│   │   │   └── CourseListRow.vue # 使用 <ListRow> 渲染课程数据
│   │   └── views/           # 页面入口
│   ├── user/
│   └── ...
│
├── stores/                  # 全局状态
├── router/                  # 路由配置
└── App.vue
```

## 4. 开发规范 (Development Rules)

### 4.1 样式限制 (Strict Styling)

-   **Rule #1**: 业务组件 (`features/**`) **严禁** 编写自定义 CSS 或使用任意 Tailwind 类。
-   **Rule #2**: 业务组件 **只能** 使用 `design-system/patterns` 中提供的组件。
-   **Rule #3**: 如果现有 Pattern 无法满足需求，**必须** 先在 `design-system/patterns` 中定义新模式，经过设计评审后方可使用。

### 4.2 布局原则 (Layout Principles)

-   **Default to List**: 默认使用列表布局。除非是图片库，否则禁止使用网格 (Grid)。
-   **Whitespace**: 使用 `spacing.ts` 定义的间距。内容块之间至少留白 `64px`。
-   **Dividers**: 使用全宽或缩进的细线 (`1px solid #E5E5E5`) 分隔内容，而非卡片阴影。

## 5. 实施步骤 (Implementation Steps)

1.  **Phase 1: Foundation**: 搭建 `design-system` 目录，配置 Tailwind 和 PrimeVue Unstyled。
2.  **Phase 2: Patterns**: 实现核心模式 (`ListRow`, `PageHeader`, `FormLayout`)。
3.  **Phase 3: Migration**: 逐个模块重构，将现有页面逻辑迁移到新架构。

---

**下一步**: 编写 `01-设计系统.md`，定义具体的 Design Tokens 和 TypeScript 接口。